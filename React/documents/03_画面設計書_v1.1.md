# 施設管理システム 画面設計書

## 1. 概要

### 1.1 目的
本ドキュメントは、施設管理システムの画面設計を定義する。

### 1.2 設計方針
- カレンダー中心のUI
- ワンクリック予約（3ステップ）
- レスポンシブ対応（PC / タブレット / スマートフォン）
- モジュール対応（無効な機能は非表示）

### 1.3 対応デバイス
| デバイス | 画面幅 | 備考 |
|---------|--------|------|
| PC | 1280px以上 | メイン対応 |
| タブレット | 768px〜1279px | レスポンシブ |
| スマートフォン | 767px以下 | レスポンシブ |

### 1.4 カラースキーム（デフォルト: ビジネスブルー）

| 用途 | カラー | Tailwindクラス |
|------|--------|---------------|
| プライマリ | 青 | bg-blue-500 |
| 成功 | 緑 | bg-green-500 |
| 警告 | 黄 | bg-yellow-500 |
| エラー | 赤 | bg-red-500 |
| 背景 | グレー | bg-gray-100 |
| カード背景 | 白 | bg-white |

**M-THEME有効時のテンプレート:**
| テンプレート名 | プライマリ | Tailwindクラス |
|---------------|-----------|---------------|
| ビジネスブルー | 青 | bg-blue-500 |
| ナチュラルグリーン | 緑 | bg-green-500 |
| エレガントパープル | 紫 | bg-purple-500 |
| ウォームオレンジ | オレンジ | bg-orange-500 |
| モノクロ | グレー | bg-gray-500 |

---

## 2. 画面一覧

### 2.1 Phase1 画面

| 画面ID | 画面名 | URL | 認証 | 権限 |
|--------|--------|-----|------|------|
| C-01 | ログイン/新規登録 | / | 不要 | - |
| C-03 | パスワードリセット | /reset-password | 不要 | - |
| U-01 | ダッシュボード | /dashboard | 必要 | 全員 |
| U-02 | 予約カレンダー | /reservations | 必要 | 全員 |
| U-03 | 予約詳細モーダル | （モーダル） | 必要 | 全員 |
| U-04 | マイページ | /mypage | 必要 | 全員 |
| A-01 | 管理者ダッシュボード | /admin | 必要 | admin以上 |
| A-02 | 施設管理 | /admin/facilities | 必要 | admin以上 |
| A-03 | カテゴリ管理 | /admin/categories | 必要 | admin以上 |
| A-04 | 予約管理 | /admin/reservations | 必要 | admin以上 |
| A-05 | ユーザー管理 | /admin/users | 必要 | admin以上 |
| A-08 | システム設定 | /admin/settings | 必要 | developer |

### 2.2 Phase2以降の画面

| 画面ID | 画面名 | URL | フェーズ |
|--------|--------|-----|---------|
| U-05 | 問い合わせ | /inquiry | Phase2 |
| U-06 | 時間延長申請 | （モーダル） | Phase2 |
| A-06 | 備品管理 | /admin/items | Phase2 |
| A-07 | 問い合わせ管理 | /admin/inquiries | Phase2 |
| A-09 | テーマ設定 | /admin/theme | Phase2 |
| D-01 | サイネージ（全体） | /display | Phase2 |
| D-02 | サイネージ（施設別） | /display/[id] | Phase2 |

---

## 3. 共通コンポーネント

### 3.1 ヘッダー（Header）

```
┌─────────────────────────────────────────────────────────────────┐
│ 🏢 施設管理システム              [予約] [マイページ] [ログアウト] │
└─────────────────────────────────────────────────────────────────┘

【管理者の場合】
┌─────────────────────────────────────────────────────────────────┐
│ 🏢 施設管理システム    [予約] [管理] [マイページ] [ログアウト]   │
└─────────────────────────────────────────────────────────────────┘
```

**仕様:**
- ロゴクリック → ダッシュボードへ
- 「管理」リンクはadmin/developerのみ表示
- モバイル時はハンバーガーメニュー
- M-THEME有効時: ロゴを設定画像に変更可能

---

### 3.2 サイドバー（管理画面用）

**展開時:**
```
┌────────────────────────┐
│ [◀] 管理メニュー        │
├────────────────────────┤
│ 📊 ダッシュボード       │
├────────────────────────┤
│ 施設・予約              │  ← グループ見出し（常時表示）
│   📍 施設管理           │
│   📁 カテゴリ管理       │
│   📅 予約管理           │
├────────────────────────┤
│ ユーザー                │
│   👥 ユーザー管理       │
├────────────────────────┤
│ システム                │  ← developerのみ表示
│   ⚙️ システム設定       │
│   🎨 テーマ設定         │  ← M-THEME有効時のみ
└────────────────────────┘
```

**折りたたみ時:**
```
┌──────┐
│ [▶] │
├──────┤
│  📊  │
├──────┤
│  📍  │
│  📁  │
│  📅  │
├──────┤
│  👥  │
├──────┤
│  ⚙️  │
│  🎨  │
└──────┘
```

**仕様:**
| デバイス | デフォルト状態 | 操作 |
|---------|--------------|------|
| PC | 展開 | ボタンで折りたたみ可能 |
| タブレット | 折りたたみ | ボタンで展開可能 |
| スマートフォン | 非表示 | ハンバーガーメニューで表示 |

**グループ構成:**
| グループ | 項目 | 表示条件 |
|---------|------|---------|
| （なし） | ダッシュボード | 常時 |
| 施設・予約 | 施設管理、カテゴリ管理、予約管理 | 常時 |
| ユーザー | ユーザー管理 | 常時 |
| システム | システム設定、テーマ設定 | developerのみ |

---

### 3.3 ボタン

| 種類 | 用途 | スタイル |
|------|------|---------|
| Primary | 主要アクション | bg-blue-500 text-white |
| Secondary | 補助アクション | bg-gray-200 text-gray-700 |
| Danger | 削除・キャンセル | bg-red-500 text-white |
| Success | 完了・保存 | bg-green-500 text-white |

※ M-THEME有効時、Primaryカラーはテーマに応じて変化

---

### 3.4 フォーム要素

**テキスト入力:**
```
┌─────────────────────────────┐
│ ラベル                       │
│ ┌─────────────────────────┐ │
│ │ プレースホルダー         │ │
│ └─────────────────────────┘ │
│ エラーメッセージ（赤）       │
└─────────────────────────────┘
```

**セレクトボックス:**
```
┌─────────────────────────────┐
│ ラベル                       │
│ ┌─────────────────────────┐ │
│ │ 選択してください      ▼ │ │
│ └─────────────────────────┘ │
└─────────────────────────────┘
```

---

### 3.5 モーダル

```
┌─────────────────────────────────────────┐
│ タイトル                           [×] │
├─────────────────────────────────────────┤
│                                         │
│           コンテンツエリア              │
│                                         │
├─────────────────────────────────────────┤
│              [キャンセル] [保存]        │
└─────────────────────────────────────────┘
```

---

### 3.6 テーブル（一覧表示）

```
┌─────────────────────────────────────────────────────────┐
│ ID    │ 名前        │ 状態    │ 操作                   │
├───────┼─────────────┼─────────┼────────────────────────┤
│ 1     │ 会議室A     │ 有効    │ [編集] [削除]          │
│ 2     │ 会議室B     │ 有効    │ [編集] [削除]          │
│ 3     │ スタジオ    │ 無効    │ [編集] [削除]          │
└───────┴─────────────┴─────────┴────────────────────────┘
```

---

### 3.7 カード

```
┌─────────────────────────────┐
│ タイトル                     │
├─────────────────────────────┤
│                             │
│ コンテンツ                   │
│                             │
└─────────────────────────────┘
```

---

## 4. 画面詳細（Phase1）

---

### 4.1 C-01: ログイン/新規登録

**URL:** /（ルート）

**ワイヤーフレーム:**
```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│                    ┌─────────────────────────┐                  │
│                    │   施設管理システム       │                  │
│                    │                         │                  │
│                    │  [ログイン] [新規登録]  │ ← タブ切り替え   │
│                    │                         │                  │
│                    │  メールアドレス          │                  │
│                    │  ┌─────────────────────┐│                  │
│                    │  │                     ││                  │
│                    │  └─────────────────────┘│                  │
│                    │                         │                  │
│                    │  パスワード              │                  │
│                    │  ┌─────────────────────┐│                  │
│                    │  │                     ││                  │
│                    │  └─────────────────────┘│                  │
│                    │                         │                  │
│                    │  [      ログイン      ] │                  │
│                    │                         │                  │
│                    │  パスワードを忘れた方   │                  │
│                    └─────────────────────────┘                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**仕様:**
| 項目 | 仕様 |
|------|------|
| タブ切り替え | ログイン/新規登録を切り替え |
| メールアドレス | 必須、メール形式バリデーション |
| パスワード | 必須、6文字以上 |
| ログインボタン | タブに応じて「ログイン」「登録」に変化 |
| パスワードリセット | クリックでC-03へ遷移 |
| ログイン成功時 | U-01（ダッシュボード）へ遷移 |
| 新規登録成功時 | 確認メール送信メッセージ表示 |

**エラーメッセージ:**
- 「ログインに失敗しました」
- 「登録に失敗しました」
- 「確認メールを送信しました。メールをご確認ください。」

---

### 4.2 C-03: パスワードリセット

**URL:** /reset-password

**ワイヤーフレーム:**
```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│                    ┌─────────────────────────┐                  │
│                    │   パスワードリセット     │                  │
│                    │                         │                  │
│                    │  メールアドレス          │                  │
│                    │  ┌─────────────────────┐│                  │
│                    │  │                     ││                  │
│                    │  └─────────────────────┘│                  │
│                    │                         │                  │
│                    │  [  リセットメール送信  ]│                  │
│                    │                         │                  │
│                    │  ← ログインに戻る       │                  │
│                    └─────────────────────────┘                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**仕様:**
| 項目 | 仕様 |
|------|------|
| メールアドレス | 必須、メール形式バリデーション |
| 送信成功時 | 「リセットメールを送信しました」表示 |
| 戻るリンク | C-01へ遷移 |

---

### 4.3 U-01: ダッシュボード

**URL:** /dashboard

**ワイヤーフレーム:**
```
┌─────────────────────────────────────────────────────────────────┐
│ 🏢 施設管理システム              [予約] [マイページ] [ログアウト] │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  こんにちは、〇〇さん                                           │
│                                                                 │
│  ┌─────────────────────────┐  ┌─────────────────────────┐      │
│  │ 📅 今日の予約            │  │ 📊 今月の予約数         │      │
│  │                         │  │                         │      │
│  │ 会議室A 10:00-11:00     │  │       5 件              │      │
│  │ スタジオ 14:00-16:00    │  │                         │      │
│  │                         │  │                         │      │
│  │ [予約カレンダーへ →]    │  │                         │      │
│  └─────────────────────────┘  └─────────────────────────┘      │
│                                                                 │
│  ┌─────────────────────────────────────────────────────┐        │
│  │ 📋 直近の予約                                        │        │
│  ├─────────────────────────────────────────────────────┤        │
│  │ 1/10 10:00-11:00  会議室A    確定                   │        │
│  │ 1/12 14:00-16:00  スタジオ   確定                   │        │
│  │ 1/15 09:00-10:00  会議室B    確定                   │        │
│  └─────────────────────────────────────────────────────┘        │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**仕様:**
| 項目 | 仕様 |
|------|------|
| 挨拶 | ログインユーザーのdisplay_name表示 |
| 今日の予約 | 本日のconfirmed予約を表示 |
| 今月の予約数 | 今月のconfirmed予約件数 |
| 直近の予約 | 今日以降のconfirmed予約を最大5件表示 |
| 予約カレンダーへ | U-02へ遷移 |

---

### 4.4 U-02: 予約カレンダー

**URL:** /reservations

**ワイヤーフレーム（PC）:**
```
┌─────────────────────────────────────────────────────────────────┐
│ 🏢 施設管理システム              [予約] [マイページ] [ログアウト] │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [< 前週]  2026年1月6日 〜 1月12日  [次週 >]    [週] [月]       │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │       │ 会議室A  │ 会議室B  │ スタジオ │ 研修室    │    │
│  ├───────┼──────────┼──────────┼──────────┼───────────┤    │
│  │ 09:00 │          │ ████████ │          │           │    │
│  │ 10:00 │ ████████ │ ████████ │          │           │    │
│  │ 11:00 │ ████████ │          │          │           │    │
│  │ 12:00 │          │          │          │           │    │
│  │ 13:00 │          │          │ ████████ │           │    │
│  │ 14:00 │          │          │ ████████ │ ████████  │    │
│  │ 15:00 │          │          │ ████████ │ ████████  │    │
│  │ 16:00 │          │          │          │           │    │
│  │ 17:00 │          │          │          │           │    │
│  └───────┴──────────┴──────────┴──────────┴───────────┘    │
│                                                                 │
│  凡例: ████ 予約済み  [空白] 空き                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**ワイヤーフレーム（スマートフォン）:**
```
┌─────────────────────────┐
│ 🏢 施設管理システム  [≡] │
├─────────────────────────┤
│                         │
│  [<] 2026年1月9日 [>]   │
│                         │
│  施設: [会議室A     ▼]  │
│                         │
│  ┌─────────────────────┐│
│  │ 09:00 - 10:00  空き ││
│  │ 10:00 - 11:00  予約 ││
│  │ 11:00 - 12:00  予約 ││
│  │ 12:00 - 13:00  空き ││
│  │ 13:00 - 14:00  空き ││
│  │ 14:00 - 15:00  空き ││
│  └─────────────────────┘│
│                         │
└─────────────────────────┘
```

**仕様:**
| 項目 | 仕様 |
|------|------|
| 表示切替 | 週表示/月表示 |
| 縦軸 | 時間（営業時間内、例: 9:00-18:00） |
| 横軸 | 施設（部屋） |
| 予約済み | 赤or濃い色で表示 |
| 空き | クリック可能、薄い色or白 |
| 空き枠クリック | U-03（予約モーダル）を開く |
| 予約済みクリック | 予約詳細を表示（自分の予約のみ編集可） |
| 前週/次週 | 週を移動 |
| スマホ時 | 日付選択 + 施設選択 + リスト表示 |

---

### 4.5 U-03: 予約詳細モーダル（新規予約）

**ワイヤーフレーム:**
```
┌─────────────────────────────────────────┐
│ 予約                              [×]  │
├─────────────────────────────────────────┤
│                                         │
│  施設: 会議室A                          │
│  日時: 2026/1/10 10:00 - 11:00          │
│                                         │
│  利用人数                               │
│  ┌─────────────────────────────────┐   │
│  │ 1                            ▼ │   │
│  └─────────────────────────────────┘   │
│                                         │
│  利用目的（任意）                       │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│              [キャンセル] [予約する]    │
└─────────────────────────────────────────┘
```

**仕様:**
| 項目 | 仕様 |
|------|------|
| 施設名 | 選択した施設を表示（読み取り専用） |
| 日時 | 選択した日時を表示（読み取り専用） |
| 利用人数 | 必須、1〜施設の最大収容人数 |
| 利用目的 | 任意、テキスト入力 |
| 予約ボタン | reservationsテーブルにINSERT |
| 重複チェック | 同一施設・時間帯の予約がないか確認 |

---

### 4.6 U-03: 予約詳細モーダル（編集・キャンセル）

**ワイヤーフレーム:**
```
┌─────────────────────────────────────────┐
│ 予約詳細                          [×]  │
├─────────────────────────────────────────┤
│                                         │
│  施設: 会議室A                          │
│  日時: 2026/1/10 10:00 - 11:00          │
│  ステータス: 確定                       │
│                                         │
│  利用人数                               │
│  ┌─────────────────────────────────┐   │
│  │ 3                            ▼ │   │
│  └─────────────────────────────────┘   │
│                                         │
│  利用目的                               │
│  ┌─────────────────────────────────┐   │
│  │ 部内ミーティング                │   │
│  └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│  [キャンセルする]      [閉じる] [更新]  │
└─────────────────────────────────────────┘
```

**仕様:**
| 項目 | 仕様 |
|------|------|
| 編集可能 | 自分の予約 かつ confirmed のみ |
| キャンセル | statusを'cancelled'に更新 |
| 更新 | 利用人数・目的を更新 |
| 他人の予約 | 閲覧のみ（編集ボタン非表示） |

---

### 4.7 U-04: マイページ

**URL:** /mypage

**ワイヤーフレーム:**
```
┌─────────────────────────────────────────────────────────────────┐
│ 🏢 施設管理システム              [予約] [マイページ] [ログアウト] │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────────────────────────────────┐        │
│  │ プロフィール                              [編集]   │        │
│  ├─────────────────────────────────────────────────────┤        │
│  │ 表示名: 山田太郎                                    │        │
│  │ メール: yamada@example.com                          │        │
│  │ 権限: 一般ユーザー                                  │        │
│  └─────────────────────────────────────────────────────┘        │
│                                                                 │
│  ┌─────────────────────────────────────────────────────┐        │
│  │ 予約履歴                            [すべて表示]   │        │
│  ├─────────────────────────────────────────────────────┤        │
│  │ 日付       │ 時間        │ 施設    │ ステータス   │        │
│  ├────────────┼─────────────┼─────────┼──────────────┤        │
│  │ 2026/1/10  │ 10:00-11:00 │ 会議室A │ 確定        │        │
│  │ 2026/1/08  │ 14:00-16:00 │ スタジオ│ 完了        │        │
│  │ 2026/1/05  │ 09:00-10:00 │ 会議室B │ キャンセル  │        │
│  └────────────┴─────────────┴─────────┴──────────────┘        │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**仕様:**
| 項目 | 仕様 |
|------|------|
| プロフィール | profilesテーブルの情報表示 |
| 編集ボタン | 表示名の編集モーダルを開く |
| 予約履歴 | 自分の予約を新しい順に表示 |
| すべて表示 | ページネーションまたは無限スクロール |
| ステータス | confirmed=確定、cancelled=キャンセル、completed=完了 |

---

### 4.8 A-01: 管理者ダッシュボード

**URL:** /admin

**ワイヤーフレーム:**
```
┌─────────────────────────────────────────────────────────────────┐
│ 🏢 施設管理システム    [予約] [管理] [マイページ] [ログアウト]   │
├────────────────────────┬────────────────────────────────────────┤
│ [◀] 管理メニュー        │                                        │
├────────────────────────┤  管理者ダッシュボード                   │
│ 📊 ダッシュボード       │                                        │
├────────────────────────┤  ┌────────────┐  ┌────────────┐       │
│ 施設・予約              │  │ 今日の予約  │  │ 施設数     │       │
│   📍 施設管理           │  │    8 件    │  │   12 室   │       │
│   📁 カテゴリ管理       │  └────────────┘  └────────────┘       │
│   📅 予約管理           │                                        │
├────────────────────────┤  ┌────────────┐  ┌────────────┐       │
│ ユーザー                │  │ 今月の予約  │  │ ユーザー数 │       │
│   👥 ユーザー管理       │  │   45 件    │  │   28 人   │       │
├────────────────────────┤  └────────────┘  └────────────┘       │
│ システム                │                                        │
│   ⚙️ システム設定       │  ┌──────────────────────────────────┐ │
│   🎨 テーマ設定         │  │ 本日の予約一覧                    │ │
│                        │  ├──────────────────────────────────┤ │
│                        │  │ 10:00 会議室A  山田太郎  部内MTG │ │
│                        │  │ 14:00 スタジオ 鈴木花子  撮影   │ │
│                        │  └──────────────────────────────────┘ │
└────────────────────────┴────────────────────────────────────────┘
```

---

### 4.9 A-02: 施設管理

**URL:** /admin/facilities

**ワイヤーフレーム:**
```
┌────────────────────────┬────────────────────────────────────────┐
│ [◀] 管理メニュー        │                                        │
├────────────────────────┤  施設管理                [+ 新規登録]  │
│ 📊 ダッシュボード       │                                        │
├────────────────────────┤  カテゴリ: [すべて         ▼]         │
│ 施設・予約              │                                        │
│   📍 施設管理 ●         │  ┌───────────────────────────────────┐│
│   📁 カテゴリ管理       │  │ ID │ 施設名   │ 定員 │ 状態│ 操作 ││
│   📅 予約管理           │  ├────┼──────────┼──────┼─────┼──────┤│
├────────────────────────┤  │ 1  │ 会議室A  │ 10   │ 有効│[編削]││
│ ユーザー                │  │ 2  │ 会議室B  │ 8    │ 有効│[編削]││
│   👥 ユーザー管理       │  │ 3  │ スタジオ │ 20   │ 有効│[編削]││
├────────────────────────┤  │ 4  │ 研修室   │ 30   │ 無効│[編削]││
│ システム                │  └────┴──────────┴──────┴─────┴──────┘│
│   ⚙️ システム設定       │                                        │
│   🎨 テーマ設定         │  [< 前へ] 1 / 2 [次へ >]               │
└────────────────────────┴────────────────────────────────────────┘
```

**施設登録/編集モーダル:**
```
┌─────────────────────────────────────────┐
│ 施設登録                          [×]  │
├─────────────────────────────────────────┤
│                                         │
│  施設名 *                               │
│  ┌─────────────────────────────────┐   │
│  │                                 │   │
│  └─────────────────────────────────┘   │
│                                         │
│  カテゴリ                               │
│  ┌─────────────────────────────────┐   │
│  │ 選択してください             ▼ │   │
│  └─────────────────────────────────┘   │
│                                         │
│  最大収容人数 *                         │
│  ┌─────────────────────────────────┐   │
│  │ 10                              │   │
│  └─────────────────────────────────┘   │
│                                         │
│  設備情報                               │
│  ┌─────────────────────────────────┐   │
│  │ プロジェクター、ホワイトボード  │   │
│  └─────────────────────────────────┘   │
│                                         │
│  予約単位（分）                         │
│  ┌─────────────────────────────────┐   │
│  │ 30                           ▼ │   │
│  └─────────────────────────────────┘   │
│                                         │
│  □ 時間延長を許可する                   │
│  ☑ 利用可能                            │
│                                         │
├─────────────────────────────────────────┤
│              [キャンセル] [保存]        │
└─────────────────────────────────────────┘
```

---

### 4.10 A-03: カテゴリ管理

**URL:** /admin/categories

**ワイヤーフレーム:**
```
┌────────────────────────┬────────────────────────────────────────┐
│ [◀] 管理メニュー        │                                        │
├────────────────────────┤  カテゴリ管理            [+ 新規登録]  │
│ ...                    │                                        │
│   📁 カテゴリ管理 ●     │  ┌───────────────────────────────────┐│
│ ...                    │  │ ID │ カテゴリ名│ 表示順 │ 操作    ││
│                        │  ├────┼───────────┼────────┼─────────┤│
│                        │  │ 1  │ 会議室    │ 1      │[編削↑↓]││
│                        │  │ 2  │ スタジオ  │ 2      │[編削↑↓]││
│                        │  │ 3  │ 研修室    │ 3      │[編削↑↓]││
│                        │  └────┴───────────┴────────┴─────────┘│
└────────────────────────┴────────────────────────────────────────┘
```

---

### 4.11 A-04: 予約管理

**URL:** /admin/reservations

**ワイヤーフレーム:**
```
┌────────────────────────┬────────────────────────────────────────┐
│ [◀] 管理メニュー        │                                        │
├────────────────────────┤  予約管理                              │
│ ...                    │                                        │
│   📅 予約管理 ●         │  日付: [2026/01/09 📅] 施設:[すべて▼] │
│ ...                    │                                        │
│                        │  ┌──────────────────────────────────┐  │
│                        │  │ 日時      │ 施設  │予約者│状態  │  │
│                        │  ├───────────┼───────┼──────┼──────┤  │
│                        │  │ 10:00-11:00│会議室A│ 山田 │ 確定 │  │
│                        │  │ 14:00-16:00│スタジオ│ 鈴木│ 確定 │  │
│                        │  │ 09:00-10:00│会議室B│ 田中 │キャンセル│  │
│                        │  └───────────┴───────┴──────┴──────┘  │
└────────────────────────┴────────────────────────────────────────┘
```

---

### 4.12 A-05: ユーザー管理

**URL:** /admin/users

**ワイヤーフレーム:**
```
┌────────────────────────┬────────────────────────────────────────┐
│ [◀] 管理メニュー        │                                        │
├────────────────────────┤  ユーザー管理                          │
│ ...                    │                                        │
│   👥 ユーザー管理 ●     │  ┌──────────────────────────────────┐  │
│ ...                    │  │ ID │ 表示名  │ メール        │権限│  │
│                        │  ├────┼─────────┼───────────────┼────┤  │
│                        │  │ 1  │ 山田太郎│yamada@test.com│user▼│  │
│                        │  │ 2  │ 鈴木花子│suzuki@test.com│admin▼│  │
│                        │  │ 3  │ 田中一郎│tanaka@test.com│user▼│  │
│                        │  └────┴─────────┴───────────────┴────┘  │
└────────────────────────┴────────────────────────────────────────┘
```

**仕様:**
| 項目 | 仕様 |
|------|------|
| 権限変更 | プルダウンで即時変更 |
| 選択肢 | user / admin（developerはここからは設定不可） |

---

### 4.13 A-08: システム設定

**URL:** /admin/settings

**ワイヤーフレーム:**
```
┌────────────────────────┬────────────────────────────────────────┐
│ [◀] 管理メニュー        │                                        │
├────────────────────────┤  システム設定                          │
│ ...                    │                                        │
│   ⚙️ システム設定 ●     │  モジュール設定                        │
│   🎨 テーマ設定         │                                        │
│                        │  ┌──────────────────────────────────┐  │
│                        │  │ モジュール      │ 説明      │ 状態│  │
│                        │  ├─────────────────┼───────────┼─────┤  │
│                        │  │ M-CORE          │ コア機能  │ON固定│  │
│                        │  │ M-USER          │ユーザー管理│ON固定│  │
│                        │  │ M-FACILITY      │ 施設管理  │ON固定│  │
│                        │  │ M-RESERVE       │ 予約機能  │[ON/OFF]│  │
│                        │  │ M-EXTEND        │ 時間延長  │[ON/OFF]│  │
│                        │  │ M-DISPLAY       │ 表示機能  │[ON/OFF]│  │
│                        │  │ M-PRICE         │ 料金計算  │[ON/OFF]│  │
│                        │  │ M-ITEM          │ 備品管理  │[ON/OFF]│  │
│                        │  │ M-INQUIRY       │問い合わせ │[ON/OFF]│  │
│                        │  │ M-NOTIFY        │ 通知機能  │[ON/OFF]│  │
│                        │  │ M-THEME         │テーマカスタマイズ│[ON/OFF]│  │
│                        │  │ M-TENANT        │マルチテナント│[ON/OFF]│  │
│                        │  └─────────────────┴───────────┴─────┘  │
└────────────────────────┴────────────────────────────────────────┘
```

**仕様:**
| 項目 | 仕様 |
|------|------|
| 表示権限 | developerのみ |
| 固定モジュール | M-CORE, M-USER, M-FACILITY はOFF不可 |
| トグル操作 | 即時でmodule_settingsテーブルを更新 |

---

### 4.14 A-09: テーマ設定（Phase2 / M-THEME有効時）

**URL:** /admin/theme

**ワイヤーフレーム:**
```
┌────────────────────────┬────────────────────────────────────────┐
│ [◀] 管理メニュー        │                                        │
├────────────────────────┤  テーマ設定                            │
│ ...                    │                                        │
│   🎨 テーマ設定 ●       │  カラーテンプレート                    │
│                        │                                        │
│                        │  ┌──────┐ ┌──────┐ ┌──────┐          │
│                        │  │ 🔵  │ │ 🟢  │ │ 🟣  │          │
│                        │  │ブルー│ │グリーン│ │パープル│          │
│                        │  │  ●  │ │     │ │     │          │
│                        │  └──────┘ └──────┘ └──────┘          │
│                        │                                        │
│                        │  ┌──────┐ ┌──────┐                    │
│                        │  │ 🟠  │ │ ⚫  │                    │
│                        │  │オレンジ│ │モノクロ│                    │
│                        │  │     │ │     │                    │
│                        │  └──────┘ └──────┘                    │
│                        │                                        │
│                        │  ロゴ設定                              │
│                        │  ┌──────────────────────────────────┐  │
│                        │  │ [現在のロゴ]    [アップロード]   │  │
│                        │  └──────────────────────────────────┘  │
│                        │                                        │
│                        │              [プレビュー] [保存]       │
└────────────────────────┴────────────────────────────────────────┘
```

---

## 5. 画面遷移図

```
[C-01 ログイン/新規登録]
         │
         │ログイン成功
         ▼
[U-01 ダッシュボード] ←─────────────────────────────┐
         │                                          │
    ┌────┴────┐                                     │
    │         │                                     │
    ▼         ▼                                     │
[U-02 予約]  [U-04 マイページ]                      │
    │                                               │
    │空き枠クリック                                 │
    ▼                                               │
[U-03 予約モーダル]                                 │
                                                    │
                                                    │
[A-01 管理者ダッシュボード] ←───────────────────────┤
         │                                          │
    ┌────┼────┬────┬────┬────┐                     │
    │    │    │    │    │    │                     │
    ▼    ▼    ▼    ▼    ▼    ▼                     │
[A-02] [A-03] [A-04] [A-05] [A-08] [A-09]           │
施設   カテゴリ 予約  ユーザー システム テーマ        │
管理   管理    管理   管理     設定    設定          │
                                                    │
                              ログアウト ───────────┘
                                   │
                                   ▼
                            [C-01 ログイン]
```

---

## 6. 補足事項

### 6.1 レスポンシブ対応

| 画面 | PC | タブレット | スマホ |
|------|-----|-----------|-------|
| U-02 予約カレンダー | 週表示グリッド | 週表示グリッド | 日別リスト |
| 管理画面サイドバー | 展開（折りたたみ可） | 折りたたみ（展開可） | ハンバーガーメニュー |

### 6.2 ローディング表示

- データ取得中はスケルトンスクリーン表示
- ボタン操作中はボタンをdisabled + スピナー表示

### 6.3 エラー表示

- フォームエラー: 入力欄下に赤文字で表示
- 通信エラー: 画面上部にトースト通知

---

## 改訂履歴

| 版 | 日付 | 内容 | 作成者 |
|----|------|------|--------|
| 1.0 | 2026/01/09 | 初版作成（Phase1画面） | Claude |
| 1.1 | 2026/01/09 | サイドバーのグルーピング・折りたたみ対応、M-THEME対応、A-09テーマ設定画面追加 | Claude |
